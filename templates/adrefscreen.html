{% extends "base.html" %} {% block content %}
<body>
  <div class="p-7">
    <h1 class="text-3xl font-bold text-gray-700 p-7">Student's Admission</h1>

    <!-- STATUSES: PENDING, APPROVED, REJECTED, ENROLLED -->

    {% if admissions.status == "pending" %}

    <p class="text-m text-gray-700 p-7">
      Waiting to be admitted in {{ admissions.subject }} batch {{ admissions.batch
      }}. Keep this code as your admission reference. We will notify you once you
      are admitted.
    </p>

    {% endif %} {% if admissions.status == "accepted" %}

    <p class="text-m text-gray-700 p-7">
      Your application has been accepted. You may now pay your fee at the accounting office. 
    </p>

    {% endif %} {% if admissions.status == "rejected" %}
    <p class="text-m text-gray-700 p-7">
      Sorry. Your application has been rejected. 
    </p>

    {% endif %} {% if admissions.status == "enrolled" %}
    <p class="text-m text-gray-700 p-7">
      Congratulations! You have now successfully enrolled for the {{ course }} batch {{ batch }}. Verify to your enrollment to the administration window. Kindly present your admission reference.
    </p>

    {% endif %}

    <!-- <p>Congratulations! You have successfully enrolled for the [COURSE] batch [BATCH]. Proceed to window 3 to verify your enrollment</p> -->
    <div class="p-7">
      <h2 class="text-xl font-bold text-gray-700">View Admission Details</h2>
      <div class="text-m text-gray-700">
        <p>{{ admissions.name }}</p>
        <p>{{ admissions.subject }}</p>
      </div>
    </div>
    <div id="admission-reference" data-value="{{id}}" class="hidden"></div>
  </div>
</body>
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script>
<script>
  const socket = io.connect();

  const id = document
    .getElementById("admission-reference")
    .getAttribute("data-value");

  socket.on(`registrations/${id}`, function (payload) {
    window.location.reload();
  });
</script>
{% endblock %}
